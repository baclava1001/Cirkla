@page "/circle-administration"
@using System.Runtime.CompilerServices
@using Cirkla_Client.Pages.Components
@inject IClient Client;

<PageTitle>@Circle?.Name</PageTitle>

<CircleRequestList Id="Id" Circle="Circle" />
<br/>
<CircleMemberList Circle="Circle"/>


@code {
    [SupplyParameterFromQuery]
    public int Id { get; set; }
    public Circle? Circle { get; set; } = new();


    protected override async Task OnInitializedAsync()
    {
        try
        {
            Circle = await Client.ApiCircleGetAsync(Id);
        }
        catch (ApiException ex)
        {
            Console.WriteLine($"An API related error occured: {ex}");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"An unexpected error occured: {ex}");
        }
    }

    // List all members, with roles
    // List all invited and requesting members
    // Action buttons for each member
    // Action buttons for the circle (Invite new, edit circle, delete circle))
}
